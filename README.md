# Speech2TurboWarp

TurboWarp用の音声認識拡張機能です。ブラウザの音声認識APIを使用して、音声入力をScratchプロジェクトで利用できます。

## 機能

- 音声認識の開始/停止
- 連続音声認識モード
- 認識精度の取得
- 多言語対応（日本語、英語、中国語、韓国語など）
- 音声認識イベントブロック
- エラーハンドリング

## インストール方法

### 方法1: URLから直接読み込み

1. [TurboWarpエディター](https://turbowarp.org/editor)を開く
2. 左下の「拡張機能」ボタンをクリック
3. 「カスタム拡張機能」を選択
4. 以下のURLを入力:
   - 基本版: `https://[your-domain]/speech2turbowarp.js`
   - 拡張版: `https://[your-domain]/speech2turbowarp-enhanced.js`

### 方法2: ローカルHTTPサーバー経由

1. このリポジトリをクローン
2. ローカルHTTPサーバーを起動:
   ```bash
   # Python 3
   python3 -m http.server 8000
   
   # Node.js (http-serverインストール済み)
   npx http-server -p 8000
   ```
3. TurboWarpで `http://localhost:8000/speech2turbowarp-enhanced.js` を読み込み

## 使用可能なブロック

### コマンドブロック
- **音声認識開始** - 単発の音声認識を開始
- **連続音声認識開始** - 継続的な音声認識を開始
- **音声認識停止** - 音声認識を停止
- **言語を[言語]に設定** - 認識言語を変更
- **音声をクリア** - 認識結果をクリア

### レポーターブロック
- **音声** - 認識された音声テキスト
- **認識精度** - 認識の信頼度（0-100%）
- **エラーメッセージ** - エラーが発生した場合のメッセージ

### 条件ブロック
- **音声認識中** - 現在認識中かどうか
- **音声認識がサポートされている** - ブラウザが対応しているか
- **音声に[テキスト]が含まれる** - 特定の単語を含むか

### イベントブロック
- **音声が認識されたとき** - 音声認識が完了したとき
- **音声に[テキスト]が含まれるとき** - 特定の単語が認識されたとき

## サンプルプログラム

### 基本的な音声コマンド
```scratch
[音声が認識されたとき]
もし <(音声) = [こんにちは]> なら
  [こんにちは！元気ですか？] と (2) 秒言う
end

もし <(音声) = [ジャンプ]> なら
  y座標を (100) ずつ変える
  (0.5) 秒待つ
  y座標を (-100) ずつ変える
end
```

### 連続音声認識でのゲーム操作
```scratch
[緑の旗がクリックされたとき]
連続音声認識開始

[ずっと]
もし <音声に [右] が含まれる> なら
  x座標を (10) ずつ変える
  音声をクリア
end

もし <音声に [左] が含まれる> なら
  x座標を (-10) ずつ変える
  音声をクリア
end
```

### 多言語対応
```scratch
[スペースキーが押されたとき]
言語を [en-US] に設定
[Now listening in English] と (2) 秒言う
音声認識開始
```

## 対応言語

- 日本語 (ja-JP)
- English US (en-US)
- English UK (en-GB)
- 中文普通话 (zh-CN)
- 한국어 (ko-KR)
- Español (es-ES)
- Français (fr-FR)
- Deutsch (de-DE)
- Italiano (it-IT)
- Português (pt-BR)

## 注意事項

- **マイクへのアクセス許可が必要です**
- **HTTPSまたはlocalhostでのみ動作します**
- **対応ブラウザ**: Chrome, Edge, Safari（一部機能）
- 音声認識の精度は環境やマイクの品質に依存します
- 連続認識モードではバッテリー消費が増加する可能性があります

## トラブルシューティング

### 音声認識が開始されない
- ブラウザがマイクへのアクセスを許可しているか確認
- HTTPSまたはlocalhostでアクセスしているか確認
- ブラウザが音声認識APIに対応しているか確認

### 認識精度が低い
- 静かな環境で使用する
- マイクの設定を確認
- 言語設定が正しいか確認

## ライセンス

MIT License

## クレジット

Original Scratch extension: [speech2scratch](https://github.com/champierre/speech2scratch) by champierre